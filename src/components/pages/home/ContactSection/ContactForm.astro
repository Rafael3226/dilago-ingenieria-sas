<form id="contact-form" class="row mb-0" method="POST">
  <div class="col-md-12 mb-4">
    <input
      type="text"
      id="contact-form-name"
      name="name"
      class="form-control border-form-control required"
      placeholder="Nombre"
      required
    />
  </div>
  <div class="w-100"></div>
  <div class="col-md-12 mb-4">
    <input
      type="email"
      id="contact-form-email"
      name="email"
      class="required email form-control border-form-control"
      placeholder="Correo"
      required
    />
  </div>
  <div class="w-100"></div>
  <div class="col-md-12 mb-4">
    <input
      type="tel"
      id="contact-form-phone"
      name="phone"
      class="required email form-control border-form-control"
      placeholder="TelÃ©fono"
      minlength="10"
      required
    />
  </div>
  <div class="w-100"></div>
  <div class="col-12 mb-4">
    <textarea
      class="required form-control border-form-control"
      id="contact-form-message"
      name="message"
      rows="3"
      cols="30"
      placeholder="Tu Mensaje"
      required></textarea>
  </div>
  <div class="col-12 text-center mb-4">
    <button
      id="contact-form-button"
      class="button button-border button-circle fw-medium ms-0 mt-4"
    >
      Enviar Mensaje
    </button>
  </div>
</form>
<script>
  const formId = "contact-form";
  const form = document.getElementById(formId);

  const handleSubmit = (e) => {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const formDataObject = Object.fromEntries(formData.entries());

    const endpoint = window.location.origin + "/api/email";
    fetch(endpoint, {
      method: "POST",
      body: JSON.stringify(formDataObject),
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.status === 200) {
          alert("El mensaje ha sido enviado.");
        } else {
          alert(
            "No es posible enviar el mensaje, para mas informacion 'gerencia@dilagoingenieriasas.com'"
          );
        }
      })
      .catch(console.error);
  };

  form.addEventListener("submit", handleSubmit);
</script>
